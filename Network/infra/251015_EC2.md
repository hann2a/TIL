### EC2 수업 복습

# EC2란 
- AWS에서 제공하는 VM 클라우드 서비스 
  - VM: 물리적 컴퓨터의 하드웨어 자원을 소프트웨어로 구현하여, 마치 별개의 컴퓨터인 것처럼 사용할 수 있는 환경 
- 지정된 OS만 깔린 가상 컴퓨터 한 대를 빌려준다고 생각하면 됨 
- 모든 인프라 서비스의 기반이 되는, AWS에서 가장 중요한 서비스 

# 인스턴스란 
- EC2 서비스에서 빌린 VM 하나를 칭함 
- 사용자가 선택한 설정(OS, 저장공간, RAM, GPU, 네트워크 설정 등)을 바탕으로 만든 가상 컴퓨터 공간 
- free-tier에서는 t2.micro, t3.micro 같은 사양이 낮은 서버를 사용해야 한다 

## 인스턴스 중지 | 종료 
- 인스턴스 중지(stop)
  - 컴퓨터를 끄는 것 
  - os는 돌아가지 않아서 사용료는 안내지만 저장소인 EBS(Elastic Block Store)에 대한 비용은 계속 부과 
  - 중지했다가 다시 시작하면 ip주소는 바뀌지만 서버는 복구된다. 

- 인스턴스 종료(terminate)
  - 모든 데이터 삭제 및 접근 불가, 복구 불가 
  - 종료해도 정리 되는 동안에는 뜨지만 끝나면 목록에서 사라짐 

---

# 보안 설정 

## 1. pem key 
- EC2 서버에 SSH 접속(터미널에 접근)하기 위한 비공개 key
- 분실하면 해당 인스턴스에 다시는 접속할 수 없다 
  - EBS는 따로 다른 인스턴스에 attach해서 데이터 자체는 살려낼 수 있다. 
- .gitignore에 추가해야 되고 유출되면 즉시 폐기해야 한다. 
  - 유출되면 새 키를 발급받을 수 있다. 
- key pair라고 부르는 이유 
  - public key / private key
  - public key는 EC2 인스턴스 내부에 저장, private key는 `.pem` 키로 발급됨 

## 2. 보안 그룹 
- EC2 서버에 붙는 가상 방화벽 
- 어떤 트래픽을 허용할지 설정하는 규칙의 집합 

### 인바운드 규칙 
- 인스턴스 밖에서 안으로 들어오는 트래픽에 대한 규칙 
- 기본값은 아무 포트도 열려있지 않음 
- SSH 접속: 터미널 접근(PORT 22)
- 웹 서버 접속: http(PORT 80), https(PORT 443)

### 아웃바운드 규칙 
- 인스턴스 안에서 밖으로 나가는 트래픽에 대한 규칙 
- 기본값은 모든 포트가 열려 있음 
- 패키지 설치, 외부 API 호출 등 

---
### 추가 공부 

# 탄력적 IP (Elastic IP)
- 인스턴스를 중지하고 다시 시작하면 공인 IP가 바뀐다. 
- 고정된 IP가 필요하면 Elastic IP를 할당받아 연결한다. 
- 단, 연결 안 된(사용 안하는) Elastic IP는 요금이 부과된다. 

# VPC, 서브넷
- EC2는 항상 VPC(Virtual Private CLoud)안에 생성된다. 
- VPC는 가상의 네트워크 공간으로, 하나의 회사나 프로젝트의 사설 네트워크 망이다. 
- VPC 안에는 여러 서브넷(공개/비공개망)이 존재한다. 
  - Public Subnet: 외부 인터넷 접근 가능(웹 서버용)
  - Private Subnet: 외부 접근 차단(DB 서버용)

# AMI (Amazon Machine Image)
- 인스턴스를 복제/배포하기 위한 템플릿 이미지 
- OS, 패키지, 설정이 포함된 스냅샷 
- 직접 커스터마이징한 서버를 AMI로 만들어두면 동일 환경을 쉽게 여러 개 띄울 수 있다. 